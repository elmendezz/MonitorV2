<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitor de Dispositivo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: #000; color: #EAEAEA; margin: 0; padding: 15px;
            display: flex; justify-content: center; align-items: flex-start; min-height: 100vh;
        }
        .container {
            width: 100%; max-width: 800px; background-color: #1A1A1A;
            border-radius: 12px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); overflow: hidden;
        }
        .header {
            background: linear-gradient(90deg, #007BFF, #0056b3); color: white;
            padding: 20px; text-align: center;
        }
        .header h1 { margin: 0; font-size: 1.8em; }
        .header p { margin: 5px 0 0; font-size: 0.9em; opacity: 0.8; }
        .content {
            padding: 20px; display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;
        }
        .info-card {
            background-color: #252525; padding: 20px; border-radius: 8px;
            border-left: 4px solid #007BFF;
        }
        .info-card h2 {
            margin: 0 0 15px; font-size: 1.2em; color: #00AFFF;
            border-bottom: 1px solid #333; padding-bottom: 10px;
        }
        .info-card p {
            margin: 10px 0; font-size: 1.1em; display: flex;
            justify-content: space-between; align-items: center;
        }
        .info-card span { font-weight: bold; color: #FFFFFF; text-align: right; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Monitor de Dispositivo</h1>
            <p id="update-time">Obteniendo datos...</p>
        </div>
        <div class="content">
            <div class="info-card">
                <h2>üîã Bater√≠a</h2>
                <p>Nivel: <span id="charge-level">--%</span></p>
                <p>Estado: <span id="charging-status">--</span></p>
                <p>Potencia: <span id="power">--W</span></p>
                <p>Corriente: <span id="current">--A</span></p>
                <p>Voltaje: <span id="voltage">--V</span></p>
                <p>Temperatura: <span id="temperature">--¬∞C</span></p>
            </div>
            <div class="info-card">
                <h2>üöÄ Actividad del Sistema</h2>
                <p>App Principal: <span id="foreground-app">--</span></p>
                <p>Procesos Totales: <span id="background-apps">--</span></p>
                <p>Tiempo Encendido: <span id="uptime">--</span></p>
            </div>
        </div>
    </div>

    <script>
        function updateText(id, value) {
            const element = document.getElementById(id);
            if (element) {
                element.innerText = value !== "N/A" ? value : "--";
            }
        }

        async function actualizarDatos() {
            try {
                // --- ‚ö†Ô∏è ¬°URL ACTUALIZADA! ‚ö†Ô∏è ---
                const url = 'https://raw.githubusercontent.com/elmendezz/Monitor/main/data.json';
                
                // A√±adimos un par√°metro para evitar que el navegador use una versi√≥n en cach√©
                const response = await fetch(`${url}?t=${new Date().getTime()}`);
                
                if (!response.ok) throw new Error(`Error de red: ${response.statusText}`);

                const data = await response.json();

                updateText('update-time', `√öltima actualizaci√≥n: ${new Date().toLocaleTimeString()}`);
                updateText('charge-level', data.chargeLevel);
                updateText('charging-status', data.chargingStatus);
                updateText('power', data.power);
                updateText('current', data.current);
                updateText('voltage', data.voltage);
                updateText('temperature', data.temperature);
                updateText('foreground-app', data.foregroundApp);
                updateText('background-apps', data.backgroundApps);
                updateText('uptime', data.uptime);

            } catch (error) {
                console.error("Error al obtener los datos:", error);
                updateText('update-time', "Error de conexi√≥n con GitHub");
            }
        }

        actualizarDatos();
        setInterval(actualizarDatos, 15000); // Actualiza cada 15 segundos
    </script>
</body>
</html>